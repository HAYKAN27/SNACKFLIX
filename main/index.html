<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Makanan - Produk & Keranjang</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="./src/output.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>



    <style>
        html{
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Poppins', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #ff7e5f, #feb47b);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateY(0);
            }

            to {
                opacity: 0;
                transform: translateY(-20px);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-in forwards;
        }

        .animate-fade-out {
            animation: fadeOut 0.3s ease-out forwards;
        }

        .product-card {
            transition: transform 0.3s ease;
            /* Tambahan untuk efek muncul: mulai dengan opacity 0 dan sedikit geser ke bawah */
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
            /* Transisi halus untuk muncul */
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        /* Kelas untuk memicu animasi muncul */
        .product-card.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Click-scale helper class for JS-triggered clicks */
        .scale-click {
            transform: scale(0.92) !important;
            transition: transform 0.14s ease;
        }

        /* Custom modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
        }

        /* Animated mobile menu: collapsed by default, expand when .open is added */
        #mobile-menu {
            overflow: hidden; /* allow height transition */
            max-height: 0;
            opacity: 0;
            padding-top: 0;
            padding-bottom: 0;
            transition: max-height 0.32s cubic-bezier(.2,.8,.2,1),
                        opacity 0.24s ease,
                        padding 0.28s ease;
        }

        #mobile-menu.open {
            max-height: 480px; /* enough to show menu items */
            opacity: 1;
            padding-top: 0.5rem; /* match original pt-2 */
            padding-bottom: 0.75rem; /* match original pb-3 */
        }
    </style>
</head>

<body class="gradient-bg text-gray-800">
    <!-- Navbar -->
    <nav class="bg-orange-600 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="#" class="flex items-center text-white no-underline">
                        <img src="img/img-stand/Logo.jpg" alt="Logo Snack Flix" class="w-8 h-8 md:w-10 md:h-10 object-cover rounded-full mr-3">
                        <span class="font-bold text-lg md:text-xl leading-none">Snack Flix</span>
                    </a>
                </div>
                <div class="hidden md:flex items-center space-x-4">
                    <a href="#products" class="text-white hover:text-orange-200">Produk</a>
                    <a href="#cart" class="text-white hover:text-orange-200">Sosial Media </a>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="text-white focus:outline-none">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
            <div id="mobile-menu" class="md:hidden bg-orange-600 px-2 pt-2 pb-3 space-y-1 transition duration-300 ease-in-out">
                <a href="#products" class="text-white block px-3 py-2 rounded-md text-base font-medium">Product</a>
                <a href="#social-media" class="text-white block px-3 py-2 rounded-md text-base font-medium">Follow US</a>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-10">
        <h1 class="text-center text-white text-4xl font-bold mb-4">Selamat Datang di Snack Flix </h1>
        <p class="text-center text-white text-lg mb-10">Pilih makanan favorit Anda dan tambahkan ke keranjang!</p>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="products">
            <!-- Produk akan dimuat di sini -->
        </div>
    </div>

    <!-- Keranjang Desktop -->
    <div class="hidden md:block fixed top-20 right-5 w-80 bg-white p-6 rounded-lg shadow-lg z-40" id="cart">
        <h4 class="text-lg font-bold mb-4 flex items-center"><i class="fas fa-shopping-cart mr-2"></i> Keranjang Belanja
        </h4>
        <div id="cart-items"></div>
        <hr class="my-4">
        <p class="text-lg font-semibold">Total: <span id="total">0</span> IDR</p>
        <button class="w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-full mt-4"
            onclick="checkout()">Checkout</button>
    </div>

    <!-- Tombol Keranjang Mobile -->
    <div class="md:hidden fixed bottom-5 right-5 w-16 h-16 bg-orange-600 text-white rounded-full flex items-center justify-center shadow-lg cursor-pointer z-40"
        id="cart-mobile-btn">
        <i class="fas fa-shopping-cart text-xl"></i>
    </div>

    <!-- Modal Keranjang Mobile -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="flex justify-between tems-center mb-4">
                <h5 class="text-lg font-bold flex items-center"><i class="fas fa-shopping-cart mr-2"></i> Keranjang
                    Belanja</h5>
                <button class="text-gray-500 hover:text-gray-700" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="cart-items-mobile"></div>
            <hr class="my-4">
            <p class="text-lg font-semibold">Total: <span id="total-mobile">0</span> IDR</p>
            <button class="w-full bg-green-500 hovier:bg-green-600 text-white py-2 px-4 rounded-full mt-4"
                onclick="checkout()">Pesan via WhatsApp</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 h-44 text-white text-center py-6 mt-16 flex flex-col items-center justify-center gap-4" id="social-media">


                <p>&copy; 2025 SnackFlix.<br><span class="text-center text-xl">SMK TI MUHAMMADIYAH <br> CIKAMPEK.</span></p>

                        <div>
            <span class="block font-semibold mb-2">Ikuti kami di:</span>
            <a href="https://www.instagram.com/snackflix._/" target="_blank" rel="noopener" class="inline-flex items-center gap-2 bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 text-white px-4 py-2 rounded-full shadow-md hover:scale-105 transition-transform duration-200">
                <i class="fab fa-instagram text-lg"></i>
                Instagram
            </a>
        </div>
    </footer>

    <script>

        // Data produk
        const products = [
            { id: 1, name: 'Nasi Goreng', price: 25000, image: 'img/img-produk/nasigoreng.jpg' },
            { id: 2, name: 'Ayam Bakar', price: 30000, image: 'img/img-produk/ayam.jpeg' },
            { id: 3, name: 'Sate Ayam', price: 20000, image: 'img/img-produk/sate.jpeg' },
            { id: 4, name: 'Bakso', price: 15000, image: 'img/img-produk/bakso.jpg' },
            { id: 5, name: 'Mie Ayam', price: 18000, image: 'img/img-produk/Mie Ayam.jpeg' },
            { id: 6, name: 'Rendang', price: 35000, image: 'img/img-produk/rendang.jpeg' },
            { id: 7, name: 'Rendang', price: 35000, image: 'img/img-produk/rendang.jpeg' },
        ];

        let cart = [];

        // Fungsi untuk menampilkan produk
        function displayProducts() {
            const productContainer = document.getElementById('products');
            products.forEach(product => {
                const productCard = `
                    <div class="bg-white rounded-lg shadow-md overflow-hidden product-card">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-44 object-cover cursor-pointer transition-transform duration-200 transform hover:scale-120">
                        <div class="p-4 text-center">
                            <h5 class="text-xl font-semibold mb-2">${product.name}</h5>
                            <p class="text-gray-600 mb-4">Harga: ${product.price.toLocaleString()} IDR</p>
                            <button class="bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-full w-full transform transition-transform duration-150 hover:scale-105 active:scale-95" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus mr-2"></i> Tambah ke Keranjang
                            </button>
                        </div>
                    </div>
                `;
                productContainer.innerHTML += productCard;
            });

            // Tambahan: Efek muncul produk dengan delay bertahap
            const productCards = document.querySelectorAll('.product-card');
            productCards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('show'); // Tambahkan kelas 'show' untuk memicu animasi
                }, index * 200); // Delay 200ms per produk (produk pertama muncul langsung, kedua setelah 200ms, dst.)
            });
        }

        // Fungsi untuk menambah item ke keranjang
        function addToCart(id) {
            const product = products.find(p => p.id === id);
            const existingItem = cart.find(item => item.id === id);
            if (existingItem) {
                existingItem.quantity++;
                showNotification(`${product.name} ditambahkan ke keranjang (${existingItem.quantity}x)`);
            } else {
                cart.push({ ...product, quantity: 1 });
                showNotification(`${product.name} ditambahkan ke keranjang`);
            }
            updateCart();
        }

        // Helper: animasi klik pada elemen (mis. gambar) lalu panggil addToCart
        function animateAndAddToCart(id, el) {
            try {
                el.classList.add('scale-click');
                setTimeout(() => el.classList.remove('scale-click'), 140);
            } catch (e) {
                // ignore if el not provided
            }
            addToCart(id);
        }

        // Fungsi untuk menampilkan notifikasi
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in';
            notification.textContent = message;
            document.body.appendChild(notification);

            // Hapus notifikasi setelah 2 detik
            setTimeout(() => {
                notification.classList.add('animate-fade-out');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 2000);
        }

        // Fungsi untuk menghapus item dari keranjang
        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCart();
        }

        // Fungsi untuk menambah quantity
        function increaseQuantity(id) {
            const item = cart.find(item => item.id === id);
            if (item) {
                item.quantity++;
                updateCart();
            }
        }

        // Fungsi untuk mengurangi quantity
        function decreaseQuantity(id) {
            const item = cart.find(item => item.id === id);
            if (item) {
                item.quantity--;
                if (item.quantity <= 0) {
                    removeFromCart(id);
                } else {
                    updateCart();
                }
            }
        }

        // Fungsi untuk update tampilan keranjang
        function updateCart() {
            const cartItems = document.getElementById('cart-items');
            const cartItemsMobile = document.getElementById('cart-items-mobile');
            cartItems.innerHTML = '';
            cartItemsMobile.innerHTML = '';
            let total = 0;
            cart.forEach(item => {
                total += item.price * item.quantity;
                const itemHTML = `
                    <div class="flex justify-between items-center mb-2 p-2 bg-gray-100 rounded-lg">
                        <div class="flex-1">
                            <span class="block font-semibold">${item.name}</span>
                            <span class="text-sm text-gray-600">${(item.price * item.quantity).toLocaleString()} IDR</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-1 px-2 rounded-full" onclick="decreaseQuantity(${item.id})">
                                <i class="fas fa-minus"></i>
                            </button>
                            <span class="px-2">${item.quantity}</span>
                            <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-1 px-2 rounded-full" onclick="increaseQuantity(${item.id})">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="bg-red-500 hover:bg-red-600 text-white py-1 px-2 rounded-full" onclick="removeFromCart(${item.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                cartItems.innerHTML += itemHTML;
                cartItemsMobile.innerHTML += itemHTML;
            });
            document.getElementById('total').textContent = total.toLocaleString();
            document.getElementById('total-mobile').textContent = total.toLocaleString();
        }

        // Fungsi checkout (MODIFIKASI: Kirim pesanan ke WhatsApp)
        function checkout() {
            if (cart.length === 0) {
                Swal.fire({
                    icon: "error",
                    title: "Oops...",
                    text: "Keranjang kamu kosong!",
                });
                return;
            }

            // Ganti dengan nomor WhatsApp admin (format internasional, tanpa +)
            const nomorWhatsApp = '6288809847754'; // Contoh: 6281234567890 (ganti sesuai nomor kamu)

            // Buat pesan WhatsApp dengan detail pesanan
            let pesan = 'Halo, saya ingin memesan makanan berikut:\n\n';
            let total = 0;
            cart.forEach(item => {
                const subtotal = item.price * item.quantity;
                total += subtotal;
                pesan += `- ${item.name} (Qty: ${item.quantity}) - ${subtotal.toLocaleString()} IDR\n`;
            });
            pesan += `\nTotal: ${total.toLocaleString()} IDR\n\nTerima kasih!`;

            // Encode pesan untuk URL
            const encodedPesan = encodeURIComponent(pesan);

            // Buat URL WhatsApp dan redirect
            const urlWhatsApp = `https://wa.me/${nomorWhatsApp}?text=${encodedPesan}`;
            window.open(urlWhatsApp, '_blank'); // Buka di tab baru

            // Kosongkan keranjang setelah checkout
            cart = [];
            updateCart();
        }

        // Fungsi untuk modal
        function openModal() {
            document.getElementById('cartModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('cartModal').style.display = 'none';
        }

        // Event listener untuk tombol mobile menu (toggle .open for animated transitions)
        document.getElementById('mobile-menu-button').addEventListener('click', function () {
            const menu = document.getElementById('mobile-menu');
            // Remove the utility 'hidden' if present (Tailwind hides it on md and up)
            menu.classList.remove('hidden');
            menu.classList.toggle('open');
        });

        // Event listener untuk tombol keranjang mobile
        document.getElementById('cart-mobile-btn').addEventListener('click', openModal);

        // Inisialisasi
        displayProducts();
    </script>
</body>

</html>